@using RTB.Blazor.UI.Extensions
@inherits RTBComponent

@code {
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    [Parameter]
    public RenderFragment? CollapseContent { get; set; }

    [Parameter] public bool IsExpanded { get; set; }

    [Parameter]
    public EventCallback<bool>? IsExpandedChanged { get; set; }

    [Parameter]
    public bool InitialExpanded { get; set; } = false;
}

@ChildContent
    
@if(IsExpanded)
{
    @CollapseContent
}

@code{
    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender) IsExpanded = InitialExpanded;
    }

    public void Toggle() => IsExpanded = !IsExpanded;
    public void Open() => IsExpanded = true;
    public void Close() => IsExpanded = false;
}
