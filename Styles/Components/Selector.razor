@inherits RTBStyleBase

@code {
    [Parameter] public RenderFragment ChildContent { get; set; } = default!;
    [Parameter] public string? Query { get; set; }

    private readonly StyleBuilder _builder = StyleBuilder.Start;
}

@{
    _builder.Clear();
}

<CascadingValue Value="@_builder">
    @ChildContent
</CascadingValue>

@code {
    protected override StyleBuilder BuildStyle(StyleBuilder builder)
    {
        var style = _builder.Build();
        if (string.IsNullOrEmpty(Query) || string.IsNullOrWhiteSpace(style)) return StyleBuilder.Start;

        return builder.AppendSelector(Query, style);
    }
}
